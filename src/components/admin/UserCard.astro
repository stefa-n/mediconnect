---
interface Props {
  userId: string;
  email: string;
  fullName: string;
  role: string;
  hospitalName?: string;
  department?: string;
}

const { userId, email, fullName, role, hospitalName, department } = Astro.props;

const roleColors: Record<string, string> = {
  mediconnect_admin: 'bg-purple-500/10 text-purple-500 border-purple-500/20',
  hospital_admin: 'bg-blue-500/10 text-blue-500 border-blue-500/20',
  medic: 'bg-green-500/10 text-green-500 border-green-500/20',
  patient: 'bg-orange-500/10 text-orange-500 border-orange-500/20'
};

const roleIcons: Record<string, string> = {
  mediconnect_admin: 'crown',
  hospital_admin: 'user-shield',
  medic: 'user-md',
  patient: 'user'
};

const roleBadgeClass = roleColors[role] || 'bg-muted/10 text-muted-foreground border-muted/20';
const roleIcon = roleIcons[role] || 'user';
---

<div class="bg-card rounded-lg border border-border p-4 hover:shadow-md transition-shadow" data-user-id={userId}>
  <div class="flex items-start justify-between gap-4">
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 mb-2">
        <h4 class="font-semibold text-foreground truncate">{fullName}</h4>
        <span class={`px-2 py-1 rounded-full text-xs border ${roleBadgeClass}`}>
          <i class={`fas fa-${roleIcon} mr-1`}></i>
          {role.replace('_', ' ')}
        </span>
      </div>
      
      <div class="space-y-1 text-sm text-muted-foreground">
        <div class="flex items-center gap-2">
          <i class="fas fa-envelope w-4"></i>
          <span class="truncate">{email}</span>
        </div>
        
        {hospitalName && (
          <div class="flex items-center gap-2">
            <i class="fas fa-hospital w-4"></i>
            <span class="truncate">{hospitalName}</span>
          </div>
        )}
        
        {department && (
          <div class="flex items-center gap-2">
            <i class="fas fa-briefcase-medical w-4"></i>
            <span class="truncate">{department}</span>
          </div>
        )}
      </div>
    </div>

    <div class="flex gap-2">
      <button 
        class="edit-user-btn p-2 rounded-lg border border-border hover:bg-accent transition-colors"
        data-user-id={userId}
        title="Edit user"
      >
        <i class="fas fa-edit text-primary"></i>
      </button>
      <button 
        class="delete-user-btn p-2 rounded-lg border border-destructive text-destructive hover:bg-destructive/10 transition-colors"
        data-user-id={userId}
        title="Delete user"
      >
        <i class="fas fa-trash"></i>
      </button>
    </div>
  </div>
</div>
